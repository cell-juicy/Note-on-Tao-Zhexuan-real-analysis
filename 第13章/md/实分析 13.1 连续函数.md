# 13.1 连续函数

## 定义

1. <font color=red>（13.1.1 连续函数）</font>设$(X,d_X)$是一个度量空间，$(Y,d_Y)$是另一个度量空间，并设$f:X\to Y$是一个函数。设$x_0\in X$，我们称$f$**在点**$x_0$**处是连续的**，当且仅当对任意的$\varepsilon>0$，存在一个$\delta>0$使得只要$d_X(x,x_0)<\delta$，就有$d_Y(f(x),f(x_0))<\varepsilon$。我们称$f$是**连续的**，当且仅当$f$在每一个点$x\in X$处都是连续的。

   <font color=blue>（注：连续函数有时候也称为**连续映射**）</font>

---

## 命题

1. <font color=red>（13.1.4 连续性保持收敛性）</font>设$(X,d_X)$和$(Y,d_Y)$是两个度量空间，$f:X\to Y$是函数，并设$x_0\in X$是$X$中的一点。那么下面三个命题在逻辑上是等价的：

   > 1. $f$在$x_0$处是连续的。
   > 2. 如果$(x^{(n)})_{n=1}^\infty$是$X$中依度量$d_X$收敛于$x_0$的序列，那么序列$(f(x^{(n)}))_{n=1}^\infty$就依度量$d_Y$收敛于$f(x_0)$。
   > 3. 对于任意一个包含$f(x_0)$的开集$V\subset Y$，都存在一个包含$x_0$的开集$U\subset X$使得$f(U)\subseteq V$。

   <font color=blue>（注：这部分内容是对[第9章](..\..\第9章\md\实分析 9.4 连续函数.md)的推广）</font>

2. <font color=red>（13.1.5）</font>设$(X,d_X)$是一个度量空间，$(Y,d_Y)$是另一个度量空间，并设$f:X\to Y$是一个函数。那么下面四个命题在逻辑上是等价的：

   > 1. $f$是连续的。
   > 2. 只要$(x^{(n)})_{n=1}^\infty$是$X$中依度量$d_X$收敛于某个点$x_0\in X$的序列，那么序列$(f(x^{(n)}))_{n=1}^\infty$就依度量$d_Y$收敛于$f(x_0)$。
   > 3. 如果$V$是$Y$中的开集，那么集合$f^{-1}(V)$就是$X$中的开集。
   > 4. 如果$F$是$Y$中的闭集，那么集合$f^{-1}(F)$就是$X$中的闭集。

   <font color=blue>（注：这个命题给我们展示了连续函数与开集，闭集的关系。它说明了连续性能够保证开集的逆象也是一个逆象。注意连续性不能从开集推出开集的前象也是开集，这点可以参考[习题12.5.4](..\..\第12章\md\实分析 12.5 紧致度量空间.md)与[习题12.5.5](..\..\第12章\md\实分析 12.5 紧致度量空间.md)中我们给出的两个反例）</font>
   
   > 推论：
   >
   > 1. <font color=red>（13.1.7 复合运算保持连续性）</font>设$(X,d_X)$，$(Y,d_Y)$和$(Z,d_Z)$是三个度量空间，那么有下面的命题成立：
   >
   >    > 1. 如果$f:X\to Y$在点$x_0\in X$处是连续的，并且$g:Y\to Z$在点$f(x_0)$处是连续的，那么$g\circ f:X\to Z$在$x_0$处就是连续的。
   >    > 2. 如果$f:X\to Y$是连续的，并且$g:Y\to Z$也是连续的，那么$g\circ f:X\to Z$就是连续的。

---

## 课后习题

##### 13.1.1 证明定理13.1.4<font color=blue>（提示：回顾[命题9.4.7](..\..\第9章\md\实分析 9.4 连续函数.md)的证明）</font>

> 证明它们之间可以互相推论即可。
>
> * 证明：(a)可以推出(b)。
>
> 即证明：若$f$在$x_0$处是连续的，则对任意$(x^{(n)})_{n=1}^\infty$是$X$中依度量$d_X$收敛于$x_0$的序列都有序列$(f(x^{(n)}))_{n=1}^\infty$就依度量$d_Y$收敛于$f(x_0)$。
>
> 于是要证明：
> $$
> \lim_{n\to\infty}d_Y(f(x^{(n)}),f(x_0))=0
> $$
> 从而考虑任意的$\varepsilon>0$，根据连续性的定义我们知道存在$\delta>0$使得只要$d_X(x,x_0)<\delta$就有$d_Y(f(x),f(x_0))<\varepsilon$；又因为$(x^{(n)})_{n=1}^\infty$是收敛于$x_0$的序列，于是对$\delta$存在$N\geq 0$使得对任意的$n\geq N$都有$d_X(x^{(n)},x_0)<\delta\Longrightarrow d_Y(f(x),f(x_0))<\varepsilon$。于是综合可以得到：
>
> 对任意任意的$\varepsilon>0$，存在$N\geq 0$使得对任意的$n\geq N$都有$d_Y(f(x),f(x_0))<\varepsilon$。
>
> 从而根据定义12.1.14我们有序列$(f(x^{(n)}))_{n=1}^\infty$就依度量$d_Y$收敛于$f(x_0)$，结论得证。
>
> ---
>
> * 证明：(b)可以推出(c)。
>
> 即证明：若对任意$(x^{(n)})_{n=1}^\infty$是$X$中依度量$d_X$收敛于$x_0$的序列都有序列$(f(x^{(n)}))_{n=1}^\infty$就依度量$d_Y$收敛于$f(x_0)$，则对于任意一个包含$f(x_0)$的开集$V\subset Y$，都存在一个包含$x_0$的开集$U\subset X$使得$f(U)\subseteq V$。
>
> 首先由于$V$是开的，于是$f(x_0)$是$V$的一个内点，换言之，存在一个$r>0$使得$B_{(Y,d_Y)}(f(x_0),r)\subseteq Y$。不妨使用反证法，假设存在某个包含$f(x_0)$的开集$V\subset Y$使得对任意包含$x_0$的开集$U\subset X$都有$f(U)$不包含于$V$，换言之即存在$y\in f(U)$使得$y\notin V$，从而集合$f(U)\verb|\|V$总是非空的，自然也有$f(U)\verb|\|B_{(Y,d_Y)}(f(x_0),r)$是非空的。
>
> 于是我们尝试构造下面的序列，我们知道任意的度量球都是非空的开集，于是对任意的$n\in\mathbb N^+$，考虑度量球
> $$
> U:=B_{(X,d_X)}\left(x_0,\frac{1}{n}\right)
> $$
> 根据上面的讨论，我们知道集合
> $$
> f\left(B_{(X,d_X)}\left(x_0,\frac{1}{n}\right)\right)\verb|\|B_{(Y,d_Y)}(f(x_0),r)
> $$
> 也是非空的，注意到这个集合依据定义可以化为：
> $$
> \left\{y\in Y:\exist\:x\in X,f(x)=y\wedge d_X(x,x_0)<\frac{1}{n}\wedge d_Y(y,f(x_0))\geq r\right\}
> $$
> 于是这表明对任意的$n\in\mathbb N^+$，总是存在$x\in X$满足$\displaystyle d_X(x,x_0)<\frac{1}{n}$与$d_Y(f(x),f(x_0))\geq r$，也就是说下面的集合
> $$
> S_n:=\left\{x\in X:d_X(x,x_0)<\frac{1}{n}\wedge d_Y(f(x),f(x_0))\geq r\right\}
> $$
> 总是非空的。于是运用选择公理，我们能对任意的$n\in\mathbb N^+$指定一个$x^{(n)}\in S_n$。根据$S_n$的定义我们显然可以得到序列$(x^{(n)})_{n=1}^\infty$是依度量$d_X$收敛于$x_0$的，但是对序列$(f(x^{(n)})_{n=1}^\infty$，我们注意到根据比较原理与$S_n$的定义应该有：
> $$
> \lim_{n\to\infty}d_Y(f(x^{(n)}),f(x_0))\geq r>0
> $$
> 从而$(f(x^{(n)})_{n=1}^\infty$不可能依度量$d_Y$收敛于$f(x_0)$，这与结论(b)矛盾。于是反证假设不成立，若结论(b)成立则必然有结论(c)成立，证明完毕。
>
> ---
>
> * 证明：(c)可以推出(a)。
>
> 即证明：若对于任意一个包含$f(x_0)$的开集$V\subset Y$，都存在一个包含$x_0$的开集$U\subset X$使得$f(U)\subseteq V$，则$f$在$x_0$处是连续的。
>
> 于是考虑任意的$\varepsilon>0$，我们知道球$B_{(Y,d_Y)}(f(x_0),\varepsilon)$是$Y$中一个包含$f(x_0)$的开集，于是根据结论(c)的内容存在一个包含$x_0$的开集$U\subset X$使得$f(U)\subseteq B_{(Y,d_Y)}(f(x_0),\varepsilon)$（从而对任意$x\in U$都有$f(x)\in B_{(Y,d_Y)}(f(x_0),\varepsilon)$）。然后因为$U$是开的，于是$x_0$是$U$的一个内点，从而存在实数$\delta>0$使得$B_{(X,d_X)}(x_0,\delta)\subseteq U$，结合前面的内容即有$f(B_{(X,d_X)}(x_0,\delta))\subseteq B_{(Y,d_Y)}(f(x_0),\varepsilon)$。
>
> 于是综上，我们可以总结有：
>
> 对任意的$\varepsilon>0$，都存在$\delta>0$使得对任意的$x\in B_{(X,d_X)}(x_0,\delta)$都有$f(x)\in B_{(Y,d_Y)}(f(x_0),\varepsilon)$。
>
> 结合度量球的定义，这个结论可以化为：
>
> 对任意的$\varepsilon>0$，都存在$\delta>0$使得对任意的$x\in X$满足$d_X(x,x_0)<\delta$都有$d_Y(f(x),f(x_0))<\varepsilon$。
>
> 根据定义13.1.1即$f$在$x_0$处是连续的，于是证明完毕。
>
> 综上，于是结论得证。

##### 13.1.2 证明定理13.1.5<font color=blue>（提示：定理13.1.4已经表明了(a)和(b)是等价的）</font>

> 如同提示里面说的那样，定理13.1.4已经说明了(a)和(b)是等价的（把定理13.1.4中(a)，(b)里的“$x_0$”改为“任意的$x_0$”就行了）。于是我们只需要证明(a)，(c)，(d)是等价的就行。
>
> * 证明：(a)等价于(c)。
>
> 先证明：若$f$是连续的，则对任意$V$是$Y$中的开集都有集合$f^{-1}(V)$就是$X$中的开集。
>
> 对任意的$x_0\in f^{-1}(V)$，根据逆像定义有$f(x_0)\in V$；接着由$V$是开集可知$f(x_0)$是$V$的内点，即存在$\varepsilon>0$使得$B_{(Y,d_Y)}(f(x_0),\varepsilon)$包含于$V$。然后根据$f$的连续性我们知道存在$\delta>0$使得对任意$x\in X$满足$d_X(x,x_0)<\delta$都有$d_Y(f(x),f(x_0))<\varepsilon$（于是即有$f(x)$属于球$B_{(Y,d_Y)}(f(x_0),\varepsilon)$，进而$f(x)$属于$V$），从而可以推知$x\in f^{-1}(V)$。考虑到度量球的定义，我们可以总结目前推知的信息得到：
>
> 对任意的$x_0\in f^{-1}(V)$，存在$\delta>0$使得球$B_{(X,d_X)}(x_0,\delta)$包含于$f^{-1}(V)$。
>
> 然后根据命题12.2.15(a)我们可以直接得到$f^{-1}(V)$是开的。
>
> 然后证明：若对任意$V$是$Y$中的开集都有集合$f^{-1}(V)$就是$X$中的开集，则$f$是连续的。
>
> 对任意的$x_0\in X$，考虑任意的$\varepsilon>0$。我们令有$V:=B_{(Y,d_Y)}(f(x_0),\varepsilon)$，于是$V$是$Y$中的开集，进而根据结论(c)有$f^{-1}(V)$是$X$中的开集。注意到$x_0\in f^{-1}(V)$，于是$x_0$是$f^{-1}(V)$的内点，存在$\delta>0$使得$B_{(X,d_X)}(x_0,\delta)\subseteq f^{-1}(V)$。考虑到度量球的定义即可总结有：
>
> 对任意的$\varepsilon>0$，存在$\delta>0$使得对任意$x\in X$满足$d_X(x_0,x)<\delta$，则有$x\in f^{-1}(V)\Longrightarrow d_Y(f(x),f(x_0))<\varepsilon$。
>
> 于是根据定义13.1.1可以得到$f$在任意的$x_0\in X$处连续，从而$f$是连续的。
>
> 综上，于是结论(a)和结论(c)是等价的。
>
> ---
>
> * 证明：(c)等价于(d)。
>
> 先证明结论(c)可以导出结论(d)。
>
> 对任意$F$是$Y$中的闭集，根据命题12.2.15(e)我们知道必然有$V:=Y\verb|\|F$是一个开集，于是根据结论(c)我们有集合$f^{-1}(V)$也是开集，并且注意到：
> $$
> \begin{align}
> X\verb|\|f^{-1}(V)&=X\verb|\|\{x\in X:f(x)\in V\}\\
> &=\{x\in X:f(x)\notin V\}\\
> &=\{x\in X:f(x)\in F\}\qquad(注意到对任意x\in X都有f(x)\in Y)\\
> &=f^{-1}(F)
> \end{align}
> $$
> 于是根据命题12.2.15(e)可得$f^{-1}(F)$是闭的。
>
> 类似地我们可以证明能通过结论(d)导出结论(c)。大概如下面所示：
>
> 对任意$V$是$Y$中的开集，根据命题12.2.15(e)我们知道必然有$F:=Y\verb|\|V$是一个闭集，于是根据结论(d)我们有集合$f^{-1}(F)$也是闭集，并且注意到：
> $$
> \begin{align}
> X\verb|\|f^{-1}(F)&=X\verb|\|\{x\in X:f(x)\in F\}\\
> &=\{x\in X:f(x)\notin F\}\\
> &=\{x\in X:f(x)\in V\}\qquad(注意到对任意x\in X都有f(x)\in Y)\\
> &=f^{-1}(V)
> \end{align}
> $$
> 于是根据命题12.2.15(e)可得$f^{-1}(V)$是开的。
>
> 综上，于是结论(c)和结论(d)是等价的。
>
> 综上，于是命题13.1.5得证。

##### 13.1.3 利用定理13.1.4和定理13.1.5证明推论13.1.7

> 注意到结论(a)实际上蕴含了结论(b)，于是我们只需要证明结论(a)就得证了推论13.1.7。
>
> 对某个$x_0\in X$，考虑任意$(x^{(n)})_{n=1}^\infty$是$X$中依度量$d_X$收敛于$x_0$的序列，根据结论(a)的前设由$f$再$x_0$处连续与命题13.1.4(b)我们可以得到序列$(f(x^{(n)}))_{n=1}^\infty$就依度量$d_Y$收敛于$f(x_0)$，然后再由$g$再$f(x_0)$处连续与命题13.1.4(b)我们可以得到序列$(g(f(x^{(n)})))_{n=1}^\infty$就依度量$d_Z$收敛于$g(f(x_0))$。根据复合函数的定义于是有：
>
> 对任意$(x^{(n)})_{n=1}^\infty$是$X$中依度量$d_X$收敛于$x_0$的序列，那么序列$(g\circ f(x^{(n)}))_{n=1}^\infty$就依度量$d_Z$收敛于$g\circ f(x_0)$。
>
> 于是根据命题13.1.4我们知道这表明$g\circ f$在$x_0$处连续，于是推论13.1.7得证。

##### 13.1.4 举例说明，存在函数$f:\mathbb R\to\mathbb R$和函数$g:\mathbb R\to\mathbb R$满足

###### (a) $f$不连续，但是$g$和$g\circ f$都连续

>考虑下面的$f$与$g$：
>$$
>f(x):=\begin{cases}
>1&\text{if}\;x\geq 0\\
>-1&\text{if}\;x<0
>\end{cases}
>\qquad
>g(x):=x^2
>$$
>于是$g\circ f(x)=1$是连续的常数函数。

###### (b) $g$不连续，但$f$和$g\circ f$都连续

>考虑下面的$f$与$g$：
>$$
>f(x):=x^2
>\qquad
>g(x):=\begin{cases}
>1&\text{if}\;x\geq 0\\
>-1&\text{if}\;x<0
>\end{cases}
>$$
>于是$g\circ f(x)=1$是连续的常数函数。

###### (c) $f$和$g$都不连续，但$f\circ g$连续

>考虑下面的$f$与$g$：
>$$
>f(x):=\begin{cases}
>1&\text{if}\;x\geq 0\\
>0&\text{if}\;x<0
>\end{cases}
>\qquad
>g(x):=\begin{cases}
>1&\text{if}\;x\geq 0\\
>-1&\text{if}\;x<0
>\end{cases}
>$$
>于是$g\circ f(x)=1$是连续的常数函数。

##### 然后简要说明为什么这些例子都不与推论13.1.7矛盾

>因为推论13.1.7是在$f$和$g$连续的情况下能够断定$g\circ f$的连续性，但是不是说$f$和$g$不连续则$g\circ f$就不连续。

##### 13.1.5 设$(X,d)$是一个度量空间，并设$(E,d|_{E\times E})$是$(X,d)$的子空间。设$\iota_{E\to X}:E\to X$是一个包含映射，对任意的$x\in E$都有$\iota_{E\to X}(x):=x$。证明：$\iota_{E\to X}$是连续的

>对任意的$x_0\in E$，对任意的$\varepsilon>0$，可以令有$\delta:=\varepsilon$，直接断言对任意$x\in E$满足$d|_{E\times E}(x,x_0)<\delta$，由于$d|_{E\times E}$是$d$的限制函数与$\iota_{E\to X}$的定义，我们可以得到：
>$$
>d(\iota_{E\to X}(x),\iota_{E\to X}(x_0))=d(x,x_0)\xlongequal{x,x_0\in E}d|_{E\times E}(x,x_0)<\varepsilon
>$$
>于是根据定义13.1.1可以得到$\iota_{E\to X}$在$x_0$处是连续的，从而有$\iota_{E\to X}$是连续的。

##### 13.1.6 设$f:X\to Y$是从度量空间$(X,d_X)$到另一个度量空间$(Y,d_Y)$的函数。设$E$是$X$的子集，（它具有导出度量$d_X|_{E\times E}$），并设$f|_E:E\to Y$是$f$在$E$上的限制函数。证明：如果$x_0\in E$且$f$在$x_0$处是连续的，那么$f|_E$也在$x_0$处连续。然后解释这个命题的逆命题是否成立。由此进一步推导出：如果$f$是连续的，那么$f|_E$就是连续的。因此，对函数定义域的限制不会破坏连续性<font color=blue>（提示：利用习题13.1.5）</font>

>注意到$f|_E=f\circ\iota_{E\to X}$，于是运用习题13.1.5，$f$，$\iota_{E\to X}$在$x_0\in E$处连续与推论13.1.7综合可以得到$f|_E$是连续的。把这个结论的前设推广到任意的$x_0\in E$上就可以得到“如果$f$是连续的，那么$f|_E$就是连续的”。
>
>注意这个命题的逆命题显然是不成立的，一个最简单的例子，当你将$E$限制为单点集$\{x_0\}$时，你会发现无论$f$是什么函数都能得到$f|_E$在$x_0$处是连续的，但是显然$f$不可能总是连续的。

##### 13.1.7 设$f:X\to Y$是从度量空间$(X,d_X)$到另一个度量空间$(Y,d_Y)$的函数。设$X$的象$f(X)$包含在$Y$的某个子集$E\subset Y$中。设$g:X\to E$是与$f$一样的函数（即对任意$x\in E$均有$g(x)=f(x)$），但值域由$Y$变成了$E$，$E$的度量使用由$Y$导出的度量$d_Y|_{E\times E}$。证明，对任意的$x_0\in X$，$f$在$x_0$处是连续的，当且仅当$g$在$x_0$处是连续的。因此，对函数值域的限制不会影响函数的连续性

>注意到对任意的$x$，$x'\in X$，由于$d_Y|_{E\times E}$是$d_Y$的限制函数，于是我们有：
>$$
>d_Y(f(x),f(x'))=d_Y|_{E\times E}(f(x),f(x'))=d_Y|_{E\times E}(g(x),g(x'))
>$$
>然后根据定义13.1.1，我们可以列出下面这一大串等价关系：
>
>$f$在$x_0$处是连续的，当且仅当对任意的$\varepsilon>0$，存在一个$\delta>0$使得只要$d_X(x,x_0)<\delta$，就有$d_Y(f(x),f(x_0))<\varepsilon$。这等价于对任意的$\varepsilon>0$，存在一个$\delta>0$使得只要$d_X(x,x_0)<\delta$，就有$d_Y|_{E\times E}(g(x),g(x_0))<\varepsilon$，也即当且仅当$g$在$x_0$处是连续的。
>
>综上，于是$f$在$x_0$处是连续的当且仅当$g$在$x_0$处是连续的。于是结论得证。

---

## 本节相关跳转

[实分析 9.4 连续函数](..\..\第9章\md\实分析 9.4 连续函数.md)

[实分析 12.5 紧致度量空间](..\..\第12章\md\实分析 12.5 紧致度量空间.md)
